<launch>
  <let name="veh" value="$(env VEH 'pontiac')"/>

  <let name="pkg_name" value="traffic_light"/>
  <arg name="node_name" default="traffic_light_node"/>
  <arg name="param_file_name" value="$(env PARAM_FILE_NAME 'TL_protocol')"/>

  <arg name="protocol_node_name" default="led_emitter_node"/>
  <arg name="protocol_file" default="LED_protocol"/>

  <group>
    <remap from="led_emitter_node/custom_pattern" to="~custom_pattern"/>
    <push_ros_namespace namespace="$(var veh)"/>
    <node name="$(var node_name)" pkg="$(var pkg_name)" exec="$(var node_name).py" output="screen">
      <param from="$(find-pkg-share traffic_light)/config/$(var node_name)/$(var param_file_name).yaml"/>
      <param from="$(find-pkg-share led_emitter)/config/$(var protocol_node_name)/$(var protocol_file).yaml"/>
    </node>
  </group>
</launch>
